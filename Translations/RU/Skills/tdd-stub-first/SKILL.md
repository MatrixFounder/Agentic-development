---
name: tdd-stub-first
description: Разработка через тестирование (TDD) с подходом Stub-First (Сначала Заглушки).
version: 1.0
---
# Стратегия TDD и Stub-First

## 1. Фаза Заглушек (Stubbing Phase)
1. **Создайте Структуру:** Файлы, классы, методы.
2. **Реализуйте Заглушки:** Используйте `NotImplementedError`, `return None` или хардкодные значения.
3. **Docstrings:** Добавьте подробные строки документации, описывающие будущую логику.
4. **E2E Тест (Stub):** Напишите E2E тест, который проверяет хардкодное поведение.
   - *Пример:* утверждение `discount == 100.0` (значение заглушки).

## 2. Фаза Реализации (Implementation Phase)
1. **Проверьте Заглушки:** Убедитесь, что E2E тест проходит на заглушках.
2. **Замените Заглушки:** Реализуйте реальную логику.
3. **Юнит-тесты:** Добавьте юнит-тесты для конкретных методов и граничных случаев.
4. **Обновите E2E:** Обновите E2E тест для проверки реального поведения.
   - *Пример:* утверждение `discount == 150.0` (вычисленное значение).

## 3. Правила Тестирования
- **Никаких Моков LLM:** Используйте записанные ответы или отдельные интеграционные окружения.
- **Регрессия:** Всегда запускайте полный набор регрессионных тестов.
